{% extends "dborrador/base.html" %}

{% load static %}

{% block subtitulo %}
Fijar docentes a intento {{ intento }}
{% endblock subtitulo %}


{% block cuerpo %}

<link rel="stylesheet" type="text/css" href="{% static 'materias/horarios.css' %}">

    <div class="subseccion"><div id="titulo">Docentes no distribuidos</div>
        <button id="esconder">Mostrar/esconder docentes sin distribuir</button>
        <table id="escondible">
            <thead class="encabezado"> {% for tipo, lista in sin_distribuir.items %} <td> {{ tipo.value }} </td> {% endfor %} </thead>
            <tbody class="cuerpo">
                <tr>
                    {% for tipo, lista in sin_distribuir.items %}
                    <td> <ul> {% for carga, preferencias in lista %}
                            <li>
                                <div class="tooltip">{{ carga.docente }}
                                    <span class="tooltiptext">
                                        <span class="titulo">Encuesta de {{ carga.docente }}:</span>
                                        <ul>{% for preferencia in preferencias %}
                                            <li>{{ preferencia.preferencia.turno }} ({{preferencia.peso_normalizado|floatformat:4}})</li>
                                            {% endfor %}
                                        </ul>
                                    </span>
                                </div>
                            </li>
                            {% endfor %} </ul> </td>
                    {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>



    {% for tipo, lista in materias %}
    <div class="seccion">{{ tipo }}</div>

        {% for materia, turnos in lista %}

            {% if turnos %}
            <table class="contentbold" border="1" cellspacing="0" cellpadding="5" frame="hsides">
                <thead><div class="nombremateria">{{ materia.nombre.upper }}</div></thead>
                <tbody>
                    {% for turno in turnos %}
                    <tr>

                        <td class="fondo{{ turno.tipo }}">{{ turno.horarios_info.tipoynumero }}</td>
                        <td class="diayhora">{{ turno.horarios_info.diayhora }}</td>
                        <td class="datosdoc">
                            <div class="cargas_fijas">
                                <ul>
                                    {% for tipo, cargas_turno in turno.cargas %}
                                    {% if cargas_turno %}
                                    <li>
                                        {{ tipo.value }}: {% for carga in cargas_turno %} {{ carga.docente.nombre }} {% endfor %}
                                    </li>
                                    {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                            <div class="cargas_en_distribucion">
                                <ul>
                                    {% for tipo, asignaciones_turno in turno.asignaciones %}
                                    {% if asignaciones_turno %}
                                    <li>
                                        {{ tipo.value }}: {% for asignacion in asignaciones_turno %} {{ asignacion.carga.docente }}{% endfor %}
                                    </li>
                                    {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                        </td>
                        <td class="comentarios"><textarea name="comentarios_{{ turno.id }}" cols=60 rows=2>{{ turno.datos.comentarios }}</textarea></td>
                    </tr>

                    {% endfor %}
                </tbody>
            </table>
            {% endif %}

        {% endfor %}

    {% endfor %}

{% endblock cuerpo %}
